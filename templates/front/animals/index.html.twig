{% extends 'front/layouts/base.html.twig' %}
{# On crée des variables personnalisées #}
{% set queryParams = app.request.query.all %}

{% block body %}
    <section class="occasions-page">
        <div class="breadcrumb-area breadcrumb-height overlay" data-bg-image="{{ asset('front-assets/images/breadcrumb/bg/1.jpg') }}">
            <div class="container h-100">
                <div class="row h-100">
                    <div class="col-lg-12">
                        <div class="breadcrumb-item text-white">
                            <h2 class="breadcrumb-heading">
                                Nos Animaux                  
                                                            
                            </h2>
                            <ul>
                                <li>
                                    <a class="text-primary" href="/">
                                        Accueil 
                                                                                                                        
                                                                                
                                        <i class="bi bi-chevron-double-right"></i>
                                    </a>
                                </li>
                                <li>
                                    Rencontrez les animaux qui habitent le zoo                               
                                                                    
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="occasions-area section-space-y-axis-50">
            <div class="container">
                <div class="row">
                    <div class="col-xl-3 col-lg-4 order-lg-1 order-2 pt-10 pt-lg-0">
                        <div class="sidebar-area style-2">
                            <div  class="widgets-searchbox filters mb-3">
                                <form id="widgets-searchbox" action="#">
                                    <input class="input-field" name="find" type="text" placeholder="Recherchez..." />
                                    {# <button class="widgets-searchbox-btn" type="submit">
                                        <i class="bi bi-search"></i>
                                    </button> #}
                                </form>
                            </div>
                                
                                <form id="filters" class="filters">
                                    <div class="widgets-area mb-9">
                                        <h2 class="widgets-title mb-5">
                                            Race                                  
                                        </h2>
                                        <div class="widgets-item">
                                            <ul class="widgets-checkbox">
                                                {% for race in races %}
                                                {# On vérifie si la race est dans les paramètres #}
                                                {% if queryParams is not empty and queryParams.races is defined %}
                                                    {% set checked = (race.id in queryParams.races) ? "checked" : "" %}
                                                {% else %}
                                                    {% set checked = "" %}
                                                {% endif %}
                                                <li>
                                                    <input class="input-checkbox" type="checkbox"  name="races[]" id="race{{race.id}}" value="{{race.id}}" {{checked}} />
                                                    <label class="label-checkbox mb-0" for="race{{race.id}}">
                                                        {{race.name}}                                          
                                                    </label>
                                                </li>
                                                    
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="widgets-area mb-9">
                                        <h2 class="widgets-title mb-5">
                                            Habitat                                
                                        </h2>
                                        <div class="widgets-item">
                                            <ul class="widgets-checkbox">
                                                {% for habitat in habitats %}
                                                {# On vérifie si l'habitat est dans les paramètres #}
                                                {% if queryParams is not empty and queryParams.habitats is defined %}
                                                    {% set checked = (habitat.id in queryParams.habitats) ? "checked" : "" %}
                                                {% else %}
                                                    {% set checked = "" %}
                                                {% endif %}
                                                <li>
                                                    <input class="input-checkbox" type="checkbox"  name="habitats[]" id="habitat{{habitat.id}}" value="{{habitat.id}}" {{checked}} />
                                                    <label class="label-checkbox mb-0" for="habitat{{habitat.id}}">
                                                        {{habitat.title}}                                          
                                                    </label>
                                                </li>
                                                    
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    </div>

                                 
                                    <input type="hidden" name="page" value="{{page}}" />

                                </form>
                        
                            
                        </div>
                    </div>
                    <div class="col-xl-9 col-lg-8 order-lg-2 order-1">
                    <div class="animal-topbar">
                    <ul class="pt-2 pb-2" >

                        <li class="animal-view-wrap">
                            <ul class="nav" role="tablist">
                                <li class="grid-view" role="presentation">
                                    <a class="active" id="grid-view-tab" data-bs-toggle="tab" href="#grid-view" role="tab" aria-selected="true">
                                        <i class="fa fa-th"></i>
                                    </a>
                                </li>
                                <li class="list-view" role="presentation">
                                    <a id="list-view-tab" data-bs-toggle="tab" href="#list-view" role="tab" aria-selected="true">
                                        <i class="fa fa-th-list"></i>
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                        <div id="content">
                        {% include "front/animals/_content.html.twig" %}
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </section>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('front-assets/js/filters.js') }}"></script> 
{% endblock %}
